<html>

    <head>
        <link rel="stylesheet" href="/summer_meals_calculator.css" />
    </head>

    <body>

        <p class="section">
            Summer Meals Calculator <br/>
            January 2026
        </p>
        
        <p class="section">
            Instructions
        </p>

        <p>
            Add your program's inputs to the boxes in gold: 21,000
        </p>
        <p>
            If needed, guidance on standard estimates are provided in *purple*.
        </p>
    
    </body>

    <script type="text/javascript">
        // create global revenue and variables expense variables to support net revenue calculations
        var sfsp_revenue;
        var sso_revenue;
        var expenses;
        var sfsp_net_revenue;
        var sso_net_revenue;

        // set reimbursement values
        var reimbursement_rates = {
            sfsp: {
                breakfast: 3.03,
                lunch: 5.4
            },
            sso: {
                breakfast: 2.94,
                lunch: 4.86
            }
        };
        
        // get values from user inputs
        var user_inputs = {};
        var user_inputs_list = document.getElementsByTagName("input");
        var get_user_inputs = function(){
            for (user_input of user_inputs_list) {
                user_inputs[user_input.name] = Number(user_input.value);
            };
        };

        // convert dollar amounts to USD format
        var to_dollars = function(dollar_amount) {
            return dollar_amount.toLocaleString('en-US', {style: 'currency', currency: 'USD'})
        };
        
        // calculate SFSP revenue
        var calculate_program_revenues = function() {
            // get current user inputs
            get_user_inputs();

            // calculate revenues for SFSP and SSO
            var calculate_revenue = function(program){
                /*
                formula:
                (breakfast meals per week * SFSP breakfast reimbursement rate * weeks serving meals) + 
                (lunch meals per week * SFSP lunch reimbursement rate * weeks serving meals)
                */
                switch(true) {
                    // if either weeks input is empty or breakfast and lunch meals are empty, then don't calculate anything yet
                    case user_inputs["weeks"] == null:
                    case (user_inputs["breakfast_meals"] == null && user_inputs["lunch_meals"] == null):
                        break;
                    // if weeks input and at least either breakfast or lunch meals are entered, then sum breakfast and lunch reimbursement and return the sum
                    default:
                        var breakfast_reimbursement = user_inputs["breakfast_meals"] * reimbursement_rates[program]["breakfast"] * user_inputs["weeks"];
                        var lunch_reimbursement = user_inputs["lunch_meals"] * reimbursement_rates[program]["lunch"] * user_inputs["weeks"];
                        return breakfast_reimbursement + lunch_reimbursement;
                };
            };
            sfsp_revenue = calculate_revenue("sfsp");
            document.getElementById("sfsp_revenue").innerHTML =  to_dollars(sfsp_revenue);
            sso_revenue = calculate_revenue("sso");
            document.getElementById("sso_revenue").innerHTML = to_dollars(sso_revenue);
        };

        // // EXPENSE CALCULATIONS
        // // // LABOR
        // // // for all positions, cost = weekly hours * (revenue-generating weeks + non-revenue generating weeks) * weekly salary
        var calculate_labor_costs = function() {
            // get user inputs to calculate current labor costs
            get_user_inputs();

            // calculate labor costs only if at least one set of labor cost calculations is available and the number of program weeks has been specified
            switch(true) {
                case user_inputs["weeks"] == null:
                case ((user_inputs["managerial_positions"] == null || user_inputs["managerial_weekly_salary"] == null) && (user_inputs["support_positions"] == null || user_inputs["support_weekly_salary"] == null) && (user_inputs["student_staff_positions"] == null || user_inputs["student_staff_weekly_salary"] == null)):
                    break;
                default:
                    // get total operational weeks - revenue-generating weeks + non-revenue generating weeks
                    var total_operational_weeks = user_inputs["weeks"] + user_inputs["non_revenue_weeks"];
                    console.log("total operational weeks: " + total_operational_weeks);

                    // calculate managerial cost
                    var managerial_cost = user_inputs["managerial_positions"] * user_inputs["managerial_weekly_salary"] * total_operational_weeks;
                    console.log("managerial cost: " + managerial_cost);

                    // calculate support staff cost
                    var support_cost = user_inputs["support_positions"] * user_inputs["support_weekly_salary"] * total_operational_weeks;
                    console.log("support cost: " + support_cost);

                    // calculate student staff costs
                    var student_staff_cost = user_inputs["student_staff_positions"] * user_inputs["student_staff_weekly_salary"] * total_operational_weeks;
                    console.log("student staff cost: " + student_staff_cost);

                    return managerial_cost + support_cost + student_staff_cost;
            };
        };

        // // // FOOD
        // // // for all meals, cost = cost per meal * weekly meals * program weeks
        var calculate_food_costs = function() {
            // get user inputs to calculate meal costs
            get_user_inputs();

            // calculate food costs only if at least one set of meal cost inputs and number of program weeks is entered by user
            switch(true) {
                case user_inputs["weeks"] == null:
                case ((user_inputs["breakfast_cost_per_meal"] == null || user_inputs["breakfast_meals"] == null) && (user_inputs["lunch_cost_per_meal"] == null || user_inputs["lunch_meals"] == null)):
                    break;
                default:
                    // calculate breakfast cost
                    var breakfast_cost = user_inputs["breakfast_cost_per_meal"] * user_inputs["breakfast_meals"] * user_inputs["weeks"];
                    console.log("breakfast cost: " + breakfast_cost);

                    // calculate lunch cost
                    var lunch_cost = user_inputs["lunch_cost_per_meal"] * user_inputs["lunch_meals"] * user_inputs["weeks"];
                    console.log("lunch cost: " + lunch_cost);

                    // return total food cost
                    return breakfast_cost + lunch_cost;
            };
        };

        // // // TOTAL EXPENSES
        // // // calculate total expenses - labor costs + food costs + marketing costs + other costs
        var calculate_total_expenses = function() {
            // get current user inputs for marketing and labor costs
            get_user_inputs();

            // calculate total expenses
            var labor_costs = calculate_labor_costs();
            var food_costs = calculate_food_costs(); 
            expenses = labor_costs + food_costs + user_inputs["marketing_costs"] + user_inputs["other_costs"];

            // write total expenses to webpage
            document.getElementById("expenses").innerHTML = to_dollars(expenses);
        };

        var calculate_net_revenues = function() {
            switch(true) {
                case sfsp_revenue == null:
                case sso_revenue == null:
                case expenses == null:
                    break;
                default:
                    sfsp_net_revenue = sfsp_revenue - expenses;
                    document.getElementById("sfsp_net_revenue").innerHTML = to_dollars(sfsp_net_revenue);
                    sso_net_revenue = sso_revenue - expenses;
                    document.getElementById("sso_net_revenue").innerHTML = to_dollars(sso_net_revenue);
            };
        };

        class Category {
            constructor(code, label, level, parent = null) {
                this.code = code,
                this.label = label,
                this.level = level,
                this.parent = parent
            };

            insert_category_section(code) {
                var category_div = Object.assign(document.createElement("div"), {
                    id: this.code + "_section",
                    name: this.code + "_section",
                    className: "section",
                    innerHTML: this.label
                });
                if (this.parent == null) {
                    document.getElementsByTagName("body")[0].appendChild(category_div);
                } else {
                    var parent_section_name = this.parent + "_section";
                    document.getElementById(this.parent + "_section").appendChild(category_div);
                };

            };
        };

        var categories = [
            {
                code: "revenue",
                label: "Revenue",
                level: 1

            },
            {
                code: "expenses",
                label: "Expenses",
                level: 1
            },
            {
                code: "labor",
                label: "Labor",
                level: 2,
                parent: "expenses"
            },
            {
                code: "food",
                label: "Food",
                level: 2,
                parent: "expenses"
            },
            {
                code: "other",
                label: "Other",
                level: 2,
                parent: "expenses"
            }
        ];

        class Question {
            constructor(code, category, question, description = null) {
                this.code = code;
                this.category = category;
                this.question = question;
                this.description = description;
            };

            insert_question() {
                var question = Object.assign(document.createElement("p"), {
                    id: this.code + "_question",
                    name: this.code + "_question",
                    className: "question",
                    innerHTML: this.question + "<br />"
                });
                var description = Object.assign(document.createElement("span"), {
                    id: this.code + "_description",
                    name: this.code + "_description",
                    className: "description",
                    innerHTML: this.description + "<br />"
                    }
                );
                var input = Object.assign(document.createElement("input"), {
                    id: this.code,
                    name: this.code,
                    type: "number"
                });
                var category_section = this.category + "_section";
                if (this.description == null) {
                    document.getElementById(category_section).appendChild(question).appendChild(input);
                } else {
                    document.getElementById(category_section).appendChild(question).appendChild(description).appendChild(input);
                };
            };
        };

        var questions = [
            {
                code: "breakfast_meals",
                category: "revenue",
                question: "How many breakfast meals do you plan to serve each week?"
            },
            {
                code: "lunch_meals",
                category: "revenue",
                question: "How many lunch meals do you plan to serve each week?"
            },
            {
                code: "weeks",
                category: "revenue",
                question: "How many weeks during the summer will your program serve meals?",
                description: "Most programs run 8 weeks"
            },
            {
                code: "non_revenue_weeks",
                category: "labor",
                question: "Does your program schedule include additional time before or after meal service weeks for setup, training, or close-out? Enter number of non-revenue-generating weeks.",
                description: "For example, a half week of prep/orientation and a half week of close-out would equal 1 week"
            },
            {
                code: "managerial_positions",
                category: "labor",
                question: "How many managerial positions will your program require?"
            },
            {
                code: "managerial_weekly_salary",
                category: "labor",
                question: "What is the approx weekly salary of managerial positions?",
                description: "A weekly salary of $1,200 assumes a 40-hour work week at $30/hour"
            },
            {
                code: "support_positions",
                category: "labor",
                question: "How many supporting staff positions will your program require?"
            },
            {
                code: "support_weekly_salary",
                category: "labor",
                question: "What is the approx weekly salary of supporting staff positions?",
                description: "A weekly salary of $800 assumes a 40-hour work week at $20/hour"
            },
            {
                code: "student_staff_positions",
                category: "labor",
                question: "How many student staff positions will your program require?"
            },
            {
                code: "student_staff_weekly_salary",
                category: "labor",
                question: "What is the approx weekly salary of student staff positions?",
                description: "A weekly salary of $400 assumes a 40-hour work week at $10/hour"
            },
            {
                code: "breakfast_cost_per_meal",
                category: "food",
                question: "What is your cost per meal for breakfast?",
                description: "If unsure of your cost per meal, we recommend using $1.50 for breakfasts."
            },
            {
                code: "lunch_cost_per_meal",
                category: "food",
                question: "What is your cost per meal for lunch?",
                description: "If unsure of your cost per meal, we recommend using $2.57 for lunches."
            },
            {
                code: "marketing_costs",
                category: "other",
                question: "If desired, add total summer marketing costs here.",
                description: "We recommend entering between $100 and $1,000, depending on your program size."
            },
            {
                code: "other_costs",
                category: "other",
                question: "Enter other anticipated costs for entire summer here.",
                description: "Examples: packaging, paper products, vehicle rental, gas, etc. <br/> We recommend entering between $5,000 and $100,000, depending on your program size."
            }
        ];

        class Output {
            constructor(code, label, category) {
                this.code = code,
                this.label = label,
                this.category = category
            };

            insert_output() {
                var output_label_string = this.label + ": ";
                var output_label = Object.assign(document.createElement("p"), {
                    id: this.code + "_label",
                    name: this.code + "_label",
                    className: "output",
                    innerHTML: output_label_string
                });
                var output_span = Object.assign(document.createElement("span"), {
                    id: this.code,
                    name: this.code,
                    className: "output"
                });
                var output_section = this.category + "_section";
                document.getElementById(output_section).appendChild(output_label);
                document.getElementById(output_label.id).appendChild(output_span);
            };
        };

        var outputs = [
            {
                code: "sfsp_revenue",
                label: "Estimated Revenue for SFSP",
                category: "revenue"
            },
            {
                code: "sso_revenue",
                label: "Estimated Revenue for SSO",
                category: "revenue"
            },
            {
                code: "expenses",
                label: "Estimated Expenses",
                category: "expenses"
            },
            {
                code: "sfsp_net_revenue",
                label: "Estimated Net Revenue for SFSP",
                category: "expenses"
            },
            {
                code: "sso_net_revenue",
                label: "Estimated Net Revenue for SSO",
                category: "expenses"
            }
        ]

        // CONTROLLER
        categories.forEach((category) => {
            var this_category = new Category(
                category.code, category.label, category.level, category.parent
            );
            this_category.insert_category_section();
        });
        
        questions.forEach((question => {
            var this_question = new Question(
                question.code, question.category, question.question, question.description
            );
            this_question.insert_question();
        }));

        outputs.forEach((output => {
            var this_output = new Output(
                output.code, output.label, output.category
            );
            this_output.insert_output();
        }));

        var inputs = document.querySelectorAll("input");
        inputs.forEach((input) => {
            input.addEventListener("input", calculate_program_revenues);
            input.addEventListener("input", calculate_total_expenses);
            input.addEventListener("input", calculate_net_revenues);
        });

    </script>
</html>

